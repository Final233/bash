user nobody nobody;
worker_processes  auto;
worker_rlimit_nofile 51200;
#error_log  /var/log/nginx/error_log;
#access_log /var/log/nginx/access_log;
#pid        /var/run/nginx/nginx.pid;
events {
    use epoll;
    worker_connections  51200;
}
http {
	server_tokens off;
    include       mime.types;
    default_type  application/octet-stream;
    log_format  main     '$server_addr $remote_addr [$time_local] $msec+$connection' 
                        '"$request" $status $connection $request time $body_bytes_sent "$http_referer"'
		    	'"$http_user_agent" "$http_x_forwarded_for"'
    open_log_file_cache max=1000 inactive=20s min_users=1 valid=1m;
    sendfile        on;
    tcp_nopush     on;
    gzip  on;
    gzip_comp_level 6;
    keepalive_timeout  35;
    server{
          listen 80;
          server_name www.web1.com;
          location / {
          root html;
          index index.php index.html;
          }
 		
 		  location ~ \.php$ {
          root           /var/www/html/web1/;
          fastcgi_pass   127.0.0.1:9000;
          fastcgi_index  index.php;
          fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
          fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
          include        fastcgi_params;
		  }
        }
        
    server{
          listen 8888;
          server_name nginx-status;
          location / {
          access_log off;
          deny all;
          return 503;
          }
          
          location /status {
          stub_status on;
          access_log off;
	   	    #error_page 404 =200 /404.html;
		    #auth_basic "welcome vip";
		    #auth_basic_user_file /etc/nginx/users/.htpasswd;
		    allow 127.0.0.1;
		    allow 192.168.2.0/24;
		    access_log off;
		    deny all;
			 }
        }

#HTTPS server
#	server {
#    		listen       443 ssl;
#		server_name  www.test.com;
#    		ssl_certificate      /etc/nginx/ssl/nginx.crt;
#		ssl_certificate_key  /etc/nginx/ssl/nginx.key;
#		ssl_session_cache    shared:SSL:1m;
#   		ssl_session_timeout  5m;
#		ssl_ciphers  HIGH:!aNULL:!MD5;
#		ssl_prefer_server_ciphers  on;
#
#	    location / {
#       		 root   html;
#       	 	 index  index.html index.htm;
#   		 }
#	}
}
